<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<link href="css/main.css" rel="stylesheet" type="text/css" media="screen" />
<script type="text/javascript">
	window.onload = function() {
		var textArea = document.getElementById("text"),
			btn = document.getElementById("btn"),
			opera = document.getElementById("operation");
		btn.onclick = function() {
			var o = opera.value[0];
				j = Number(opera.value.substr(1));
			var result = textArea.value.replace(/([-]*[0-9]+(\.[0-9]+)?)/g, function(i){
				if (!isNaN(Number(i))) {
					var ret, i = Number(i);
					switch (o) {
						case "+":
							ret = i+j;
							break;
						case "-":
							ret = i-j;
							break;
						case "*":
							ret = i*j;
							break;
						case "/":
							ret = i/j;
							break;
					}
					return ret;
				} else {
					return i;
				}
			});
			textArea.value = result;
		}
	}

</script>

<title>数字替换</title>
</head>

<body>
	<textarea id="text" style="width:100%;height:500px;"></textarea>
	<div style="margin:10px; text-align:center;">
		<label>运算：(+-*/)+数字</label>
		<input type="text" value="+1" id="operation" />
		<input type="button" id="btn" value="替换"/>
	</div>
</body>
</html> 
